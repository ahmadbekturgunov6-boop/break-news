<!DOCTYPE html>
<html lang="uz">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>üì∞ Mahalliy Yangiliklar</title>
  <!--
    Ushbu fayl to'liq ishlaydigan "Mahalliy Yangiliklar Sayti" shablonidir.
    Talablar: header, navigatsiya, kartochkalar, modal, qidiruv, responsiv dizayn.
    Ranglar: moviy (#0077cc), oq (#ffffff), kulrang fon (#f4f4f9).
  -->
  <style>
    /* -----------------------------
       Asosiy rang o'zgaruvchilari
       ----------------------------- */
    :root {
      --primary: #0077cc;
      --primary-600: #0062a8;
      --bg: #f4f4f9;
      --surface: #ffffff;
      --text: #1f2a37;
      --muted: #6b7280;
      --border: #e5e7eb;
      --shadow: 0 8px 24px rgba(0, 0, 0, 0.08);
      --radius: 14px;
      --radius-sm: 10px;
      --radius-lg: 18px;
    }

    /* -----------------------------
       Global reset va tipografiya
       ----------------------------- */
    * {
      box-sizing: border-box;
    }
    html, body {
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      color: var(--text);
      background: radial-gradient(1200px 600px at 20% -10%, #e8f3ff 0%, rgba(232,243,255,0) 60%), var(--bg);
    }
    a { color: inherit; text-decoration: none; }
    img { display: block; max-width: 100%; height: auto; }
    button { font: inherit; }

    /* -----------------------------
       Header
       ----------------------------- */
    .site-header {
      position: sticky;
      top: 0;
      z-index: 50;
      backdrop-filter: saturate(1.2) blur(8px);
      background: rgba(255,255,255,0.75);
      border-bottom: 1px solid var(--border);
    }
    .header-inner {
      max-width: 1200px;
      margin: 0 auto;
      padding: 16px 20px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 16px;
    }
    .brand {
      display: flex;
      align-items: center;
      gap: 10px;
      font-weight: 800;
      font-size: 20px;
      letter-spacing: 0.2px;
      color: var(--primary);
    }
    .brand .logo {
      width: 36px;
      height: 36px;
      border-radius: 10px;
      display: grid;
      place-items: center;
      background: linear-gradient(135deg, var(--primary), var(--primary-600));
      color: #fff;
      box-shadow: 0 6px 16px rgba(0, 119, 204, 0.35);
    }

    /* -----------------------------
       Navigatsiya menyusi
       ----------------------------- */
    .nav {
      display: flex;
      align-items: center;
      gap: 6px;
      flex-wrap: wrap;
    }
    .nav a {
      padding: 10px 14px;
      border-radius: 999px;
      color: var(--muted);
      transition: all 0.2s ease;
    }
    .nav a:hover {
      color: var(--primary);
      background: rgba(0,119,204,0.08);
    }
    .nav a.active {
      color: #fff;
      background: var(--primary);
      box-shadow: 0 6px 16px rgba(0, 119, 204, 0.35);
    }

    /* -----------------------------
       Qidiruv paneli
       ----------------------------- */
    .search-bar {
      max-width: 1200px;
      margin: 20px auto 0;
      padding: 0 20px 8px;
    }
    .search-wrap {
      position: relative;
      display: flex;
      align-items: center;
      gap: 10px;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 999px;
      padding: 10px 14px 10px 44px;
      box-shadow: var(--shadow);
    }
    .search-wrap .icon {
      position: absolute;
      left: 14px;
      color: var(--muted);
      pointer-events: none;
    }
    .search-input {
      flex: 1 1 auto;
      border: none;
      outline: none;
      background: transparent;
      font-size: 16px;
      color: var(--text);
    }
    .clear-btn {
      display: none;
      border: none;
      background: transparent;
      color: var(--muted);
      padding: 6px 8px;
      border-radius: 8px;
      cursor: pointer;
    }
    .clear-btn:hover { color: var(--primary); background: rgba(0,119,204,0.08); }
    .clear-btn.show { display: inline-block; }

    /* -----------------------------
       Asosiy kontent: kartochkalar tarmog'i
       ----------------------------- */
    .container {
      max-width: 1200px;
      margin: 18px auto 40px;
      padding: 0 20px;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 18px;
    }
    .card {
      position: relative;
      overflow: hidden;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      transition: transform 0.18s ease, box-shadow 0.18s ease, border-color 0.18s ease;
      cursor: pointer;
      display: flex;
      flex-direction: column;
      min-height: 100%;
    }
    /* Hoverda biroz kattalashish (talab 6) */
    .card:hover {
      transform: translateY(-2px) scale(1.015);
      box-shadow: 0 14px 34px rgba(0,0,0,0.12);
      border-color: rgba(0,119,204,0.25);
    }
    .card-img {
      width: 100%;
      aspect-ratio: 16 / 9;
      object-fit: cover;
      background: #dbeafe;
    }
    .card-body {
      padding: 14px 14px 16px;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    .badge {
      align-self: flex-start;
      font-size: 12px;
      color: #0b4a7d;
      background: #e6f2fb;
      border: 1px solid #cfe7fb;
      padding: 4px 8px;
      border-radius: 999px;
    }
    .title {
      font-size: 18px;
      font-weight: 700;
      line-height: 1.3;
      color: #0f172a;
    }
    .summary {
      color: var(--muted);
      line-height: 1.55;
      font-size: 14px;
    }
    .meta {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      margin-top: 6px;
      color: #64748b;
      font-size: 12px;
    }
    .read-more {
      color: var(--primary);
      font-weight: 600;
    }

    /* -----------------------------
       Modal oynasi
       ----------------------------- */
    .modal {
      position: fixed;
      inset: 0;
      display: none; /* default: yopiq */
      place-items: center;
      background: rgba(15,23,42,0.45);
      padding: 20px;
      z-index: 100;
    }
    .modal.show { display: grid; }
    .modal-dialog {
      width: min(860px, 92vw);
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius-lg);
      box-shadow: 0 30px 60px rgba(0,0,0,0.25);
      overflow: hidden;
      display: grid;
      grid-template-rows: auto 1fr;
      max-height: 88vh;
    }
    .modal-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 14px 16px;
      border-bottom: 1px solid var(--border);
      background: linear-gradient(180deg, #f8fbff, #ffffff);
    }
    .modal-title {
      font-size: 18px;
      font-weight: 800;
      color: #0b4a7d;
    }
    .close-btn {
      border: 1px solid var(--border);
      background: #ffffff;
      color: var(--muted);
      border-radius: 10px;
      padding: 8px 10px;
      cursor: pointer;
      transition: all 0.18s ease;
    }
    .close-btn:hover {
      color: var(--primary);
      border-color: rgba(0,119,204,0.35);
      box-shadow: 0 8px 20px rgba(0,119,204,0.15);
    }
    .modal-body {
      overflow: auto;
    }
    .modal-cover {
      width: 100%;
      aspect-ratio: 16/9;
      object-fit: cover;
      background: #dbeafe;
    }
    .modal-content {
      padding: 16px 16px 20px;
      display: grid;
      gap: 10px;
    }
    .modal-meta {
      color: #64748b;
      font-size: 13px;
    }
    .modal-text {
      color: #111827;
      line-height: 1.7;
      white-space: pre-line; /* \n larni saqlaydi */
    }

    /* -----------------------------
       Footer
       ----------------------------- */
    footer {
      border-top: 1px solid var(--border);
      padding: 26px 20px;
      text-align: center;
      color: #64748b;
      background: #ffffffc0;
    }

    /* -----------------------------
       Responsiv moslashuv
       ----------------------------- */
    @media (max-width: 640px) {
      .brand { font-size: 18px; }
      .brand .logo { width: 32px; height: 32px; }
      .nav { gap: 4px; }
      .nav a { padding: 8px 12px; font-size: 14px; }
      .title { font-size: 16px; }
      .summary { font-size: 13px; }
      .modal-dialog { width: 96vw; }
    }
  </style>
</head>
<body>
  <!-- Header va Navigatsiya -->
  <header class="site-header" role="banner">
    <div class="header-inner">
      <div class="brand">
        <div class="logo" aria-hidden="true">üì∞</div>
        <span>Mahalliy Yangiliklar</span>
      </div>
      <nav class="nav" aria-label="Asosiy menyu">
        <!-- Navigatsiya elementlari (talab 2) -->
        <a href="#" data-category="barchasi" class="active">Bosh sahifa</a>
        <a href="#" data-category="Mahalliy">Mahalliy</a>
        <a href="#" data-category="Jahon">Jahon</a>
        <a href="#" data-category="Texnologiya">Texnologiya</a>
        <a href="#" data-category="Sport">Sport</a>
      </nav>
    </div>
  </header>

  <!-- Qidiruv paneli -->
  <section class="search-bar">
    <div class="search-wrap" role="search">
      <span class="icon" aria-hidden="true">üîé</span>
      <input id="searchInput" class="search-input" type="search" placeholder="Sarlavha bo'yicha qidirish..." aria-label="Sarlavha bo'yicha qidiring" />
      <button id="clearBtn" type="button" class="clear-btn" aria-label="Qidiruvni tozalash">Tozalash</button>
    </div>
  </section>

  <!-- Asosiy kontent -->
  <main class="container" id="app" role="main" aria-live="polite">
    <div id="newsGrid" class="grid" aria-label="Yangiliklar ro'yxati">
      <!-- JavaScript orqali kartochkalar generatsiya qilinadi -->
    </div>
  </main>

  <!-- Modal oynasi -->
  <div id="newsModal" class="modal" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-header">
        <h2 id="modalTitle" class="modal-title">Sarlavha</h2>
        <button id="modalClose" class="close-btn" type="button" aria-label="Yopish">‚úï</button>
      </div>
      <div class="modal-body">
        <img id="modalImage" class="modal-cover" alt="Yangilik rasmi">
        <div class="modal-content">
          <div id="modalMeta" class="modal-meta">Kategoriya ‚Ä¢ Sana</div>
          <div id="modalText" class="modal-text">Matn</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer>
    ¬© 2025 Mahalliy Yangiliklar. Barcha huquqlar himoyalangan.
  </footer>

  <script>
    // ============================================
    // Ma'lumotlar manbai: newsData massivi (talab 5)
    // ============================================
    const newsData = [
      {
        id: 1,
        title: "Shahar markazida yangi istirohat bog'i ochildi",
        category: "Mahalliy",
        date: "2025-11-03",
        image: "https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?q=80&w=1600&auto=format&fit=crop",
        summary: "Mahalliy hokimiyat tomonidan barpo etilgan yashil hudud aholiga dam olish uchun qulay sharoit yaratdi.",
        content: "Bugun shahar markazida zamonaviy infratuzilmaga ega yangi istirohat bog'i foydalanishga topshirildi.\nBog'da piyodalar yo'laklari, velosiped yo'llari, bolalar maydonchalari va ochiq havoda sport maydonlari mavjud.\nTashrif buyuruvchilar uchun bepul Wi‚ÄëFi va xavfsizlik kameralar tizimi o'rnatilgan."
      },
      {
        id: 2,
        title: "Yangi IT markazi ochildi: startaplar uchun imkoniyatlar",
        category: "Texnologiya",
        date: "2025-11-05",
        image: "https://images.unsplash.com/photo-1550751827-4bd374c3f58b?q=80&w=1600&auto=format&fit=crop",
        summary: "Startaplar, akseleratsiya dasturlari va mentorlik ‚Äî barchasi bir joyda.",
        content: "IT markazi yosh tadbirkorlar va dasturchilar uchun qo'llab-quvvatlovchi ekotizim yaratadi.\nTadbirlar zali, kovorking, prototiplash laboratoriyalari va investorlarga chiqish imkoniyatlari mavjud.\nMahalliy startaplar endi global bozorga chiqish uchun zarur platformaga ega."
      },
      {
        id: 3,
        title: "Mahalliy futbol jamoasi yarim finalga yo'l oldi",
        category: "Sport",
        date: "2025-11-07",
        image: "https://images.unsplash.com/photo-1502877338535-766e1452684a?q=80&w=1600&auto=format&fit=crop",
        summary: "Keskin bahsda so'nggi daqiqalarda kiritilgan gol jamoaga g'alaba keltirdi.",
        content: "Stadionda yuzlab muxlislar jamlangan o'yinda mahalliy jamoa kuchli raqibni 2:1 hisobida mag'lub etdi.\nMurabbiy jamoaning kurashuvchanligi va muxlislarning qo'llab-quvvatlashi g'alabada muhim rol o'ynaganini ta'kidladi."
      },
      {
        id: 4,
        title: "Shahar atrofidagi yo'llar rekonstruksiya qilinmoqda",
        category: "Mahalliy",
        date: "2025-11-08",
        image: "https://images.unsplash.com/photo-1477414348463-c0eb7f1359b6?q=80&w=1600&auto=format&fit=crop",
        summary: "Transport oqimini yengillashtirish va xavfsizlikni oshirish rejalashtirilgan.",
        content: "Loyiha doirasida yo'l qoplamasi yangilanadi, yoritish tizimi o'rnatiladi va piyodalar uchun xavfsiz o'tish joylari barpo etiladi.\nIshlar bosqichma-bosqich olib borilmoqda, yakuniy bosqich kelgusi oyga rejalashtirilgan."
      },
      {
        id: 5,
        title: "Global bozorlar: energiya narxlarida tebranishlar",
        category: "Jahon",
        date: "2025-11-06",
        image: "https://images.unsplash.com/photo-1526304640581-d334cdbbf45e?q=80&w=1600&auto=format&fit=crop",
        summary: "Mutaxassislar barqarorlikka erishish uchun diversifikatsiyani tavsiya etmoqda.",
        content: "Energiyaning global savdosida so'nggi haftalarda keskin tebranishlar kuzatildi.\nTahlilchilar uzoq muddatli barqarorlik uchun qayta tiklanuvchi manbalarga sarmoya kiritishni muhim deb hisoblamoqda."
      },
      {
        id: 6,
        title: "Mahalliy maktabda robototexnika to'garagi yo'lga qo'yildi",
        category: "Texnologiya",
        date: "2025-11-02",
        image: "https://images.unsplash.com/photo-1581092795360-fd1ca04f0952?q=80&w=1600&auto=format&fit=crop",
        summary: "O'quvchilar uchun amaliy mashg'ulotlar va musobaqalar tashkil etiladi.",
        content: "To'garak doirasida bolalar dasturlash va mexanika asoslarini o'rganadilar.\nO'qituvchilar xalqaro metodikalar asosida darslar olib boradi, natijalar esa ko'rgazmalarda namoyish etiladi."
      }
    ];

    // ============================================
    // DOM elementlariga murojaat
    // ============================================
    const newsGrid = document.getElementById("newsGrid");
    const searchInput = document.getElementById("searchInput");
    const clearBtn = document.getElementById("clearBtn");
    const navLinks = Array.from(document.querySelectorAll(".nav a"));

    // Modal elementlari
    const modal = document.getElementById("newsModal");
    const modalClose = document.getElementById("modalClose");
    const modalTitle = document.getElementById("modalTitle");
    const modalImage = document.getElementById("modalImage");
    const modalMeta = document.getElementById("modalMeta");
    const modalText = document.getElementById("modalText");

    // Holat
    let activeCategory = "barchasi"; // navigatsiyadan tanlangan toifa
    let lastFocusedElement = null;   // a11y: modal yopilganda fokusni qaytarish

    // ============================================
    // Foydali funksiyalar
    // ============================================
    function formatDate(iso) {
      try {
        const d = new Date(iso);
        return d.toLocaleDateString("uz-UZ", { year: "numeric", month: "long", day: "numeric" });
      } catch {
        return iso;
      }
    }

    function matchesFilters(item, query, category) {
      const q = query.trim().toLowerCase();
      const title = item.title.toLowerCase();
      const inTitle = !q || title.includes(q);
      const inCategory = category === "barchasi" || item.category === category;
      return inTitle && inCategory;
    }

    // Kartochka HTMLini yaratish
    function createCard(item) {
      const wrapper = document.createElement("article");
      wrapper.className = "card";
      wrapper.tabIndex = 0; // klaviatura bilan ham fokuslansin
      wrapper.setAttribute("role", "button");
      wrapper.setAttribute("aria-label", item.title);
      wrapper.dataset.id = item.id;

      wrapper.innerHTML = `
        <img class="card-img" src="${item.image}" alt="Rasm: ${item.title}" loading="lazy" />
        <div class="card-body">
          <span class="badge">${item.category}</span>
          <h3 class="title">${item.title}</h3>
          <p class="summary">${item.summary}</p>
          <div class="meta">
            <span>${formatDate(item.date)}</span>
            <span class="read-more">Batafsil ‚Üí</span>
          </div>
        </div>
      `;

      // Bosilganda modalni ochish
      const open = () => openModal(item);
      wrapper.addEventListener("click", open);
      wrapper.addEventListener("keydown", (e) => {
        if (e.key === "Enter" || e.key === " ") {
          e.preventDefault();
          open();
        }
      });
      return wrapper;
    }

    // Asosiy render funksiyasi
    function renderNews() {
      const query = searchInput.value || "";
      const filtered = newsData.filter((n) => matchesFilters(n, query, activeCategory));
      newsGrid.innerHTML = "";
      if (filtered.length === 0) {
        const empty = document.createElement("div");
        empty.style.gridColumn = "1 / -1";
        empty.style.padding = "16px";
        empty.style.textAlign = "center";
        empty.style.color = "#64748b";
        empty.textContent = "Mos yangilik topilmadi.";
        newsGrid.appendChild(empty);
        return;
      }
      const frag = document.createDocumentFragment();
      filtered.forEach((item) => frag.appendChild(createCard(item)));
      newsGrid.appendChild(frag);
    }

    // ============================================
    // Modal boshqaruvi
    // ============================================
    function openModal(item) {
      lastFocusedElement = document.activeElement;
      modalTitle.textContent = item.title;
      modalImage.src = item.image;
      modalImage.alt = "Rasm: " + item.title;
      modalMeta.textContent = item.category + " ‚Ä¢ " + formatDate(item.date);
      modalText.textContent = item.content;
      modal.classList.add("show");
      modal.setAttribute("aria-hidden", "false");
      // Fokusni yopish tugmasiga berish
      modalClose.focus();
      // Esc bilan yopish
      document.addEventListener("keydown", handleEsc, { once: true });
      // Orqa fonni bosganda yopish
      modal.addEventListener("click", backdropCloseOnce);
    }
    function closeModal() {
      modal.classList.remove("show");
      modal.setAttribute("aria-hidden", "true");
      if (lastFocusedElement && typeof lastFocusedElement.focus === "function") {
        lastFocusedElement.focus();
      }
    }
    function handleEsc(e) {
      if (e.key === "Escape") closeModal();
    }
    function backdropCloseOnce(e) {
      // Faqat dialog tashqarisi bosilsa
      const dialog = e.target.closest(".modal-dialog");
      if (!dialog) closeModal();
      modal.removeEventListener("click", backdropCloseOnce);
    }
    modalClose.addEventListener("click", closeModal);

    // ============================================
    // Qidiruv va navigatsiya
    // ============================================
    searchInput.addEventListener("input", () => {
      clearBtn.classList.toggle("show", searchInput.value.length > 0);
      renderNews();
    });
    clearBtn.addEventListener("click", () => {
      searchInput.value = "";
      clearBtn.classList.remove("show");
      renderNews();
      searchInput.focus();
    });

    navLinks.forEach((link) => {
      link.addEventListener("click", (e) => {
        e.preventDefault();
        navLinks.forEach((l) => l.classList.remove("active"));
        link.classList.add("active");
        activeCategory = link.dataset.category || "barchasi";
        renderNews();
      });
    });

    // Boshlang'ich render
    renderNews();
  </script>
</body>
</html>

<!DOCTYPE html>
<html lang="uz">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>üì∞ Mahalliy Yangiliklar</title>
  <!--
    Ushbu fayl: To'liq ishlaydigan ‚ÄúMahalliy Yangiliklar Sayti‚Äù
    - Bitta HTML faylda HTML, CSS va JS kodlari jamlangan
    - Rang palitrasi: moviy (#0077cc), oq (#ffffff), kulrang fon (#f4f4f9)
    - Responsiv dizayn (mobilga mos)
    - Kartochkalar hover'da biroz kattalashadi
    - Qidiruv: sarlavha bo'yicha filtrlash
    - Kategoriyalar: navigatsiya bo'limlari orqali filtrlash
    - Modal: kartochka ustiga bosilganda to‚Äòliq matn ko‚Äòrinadi
  -->
  <style>
    :root {
      --primary: #0077cc;
      --primary-600: #0063a8;
      --text: #0f172a;
      --muted-text: #475569;
      --surface: #ffffff;
      --bg: #f4f4f9;
      --border: #e5e7eb;
      --shadow: 0 6px 20px rgba(0, 0, 0, 0.08);
      --radius: 14px;
    }

    /* Global reset va tayyorlov */
    * {
      box-sizing: border-box;
    }
    html, body {
      padding: 0;
      margin: 0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      color: var(--text);
      background: var(--bg);
    }
    img {
      max-width: 100%;
      display: block;
    }
    a {
      color: inherit;
      text-decoration: none;
    }

    /* Konteyner */
    .container {
      width: 100%;
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
    }

    /* Header */
    header.site-header {
      position: sticky;
      top: 0;
      z-index: 50;
      background: linear-gradient(180deg, #ffffff 0%, #f9fbff 100%);
      backdrop-filter: blur(8px);
      border-bottom: 1px solid var(--border);
    }
    .header-inner {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 16px;
      padding: 16px 0;
    }
    .brand {
      display: flex;
      align-items: center;
      gap: 12px;
      font-weight: 800;
      letter-spacing: 0.2px;
    }
    .brand .logo {
      width: 40px;
      height: 40px;
      display: grid;
      place-items: center;
      border-radius: 10px;
      background: var(--primary);
      color: #fff;
      box-shadow: var(--shadow);
      font-size: 20px;
    }
    .brand .title {
      display: flex;
      flex-direction: column;
      line-height: 1.1;
    }
    .brand .title strong {
      font-size: 18px;
    }
    .brand .title span {
      font-size: 12px;
      color: var(--muted-text);
    }

    /* Nav */
    nav.primary-nav {
      display: flex;
      align-items: center;
      gap: 8px;
      flex-wrap: wrap;
    }
    .nav-link {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      padding: 10px 14px;
      border-radius: 999px;
      background: #ffffff;
      border: 1px solid var(--border);
      color: var(--muted-text);
      font-weight: 600;
      font-size: 13px;
      transition: transform 0.15s ease, background 0.2s ease, color 0.2s ease, border-color 0.2s ease;
      will-change: transform;
    }
    .nav-link:hover {
      transform: translateY(-1px);
      border-color: #d1d5db;
      color: var(--text);
    }
    .nav-link.active {
      background: var(--primary);
      border-color: var(--primary);
      color: #ffffff;
    }

    /* Qidiruv */
    .search-wrap {
      flex: 1;
      display: flex;
      justify-content: flex-end;
      min-width: 220px;
    }
    .search {
      width: 100%;
      max-width: 320px;
      position: relative;
    }
    .search input {
      width: 100%;
      padding: 12px 40px 12px 14px;
      border-radius: 12px;
      border: 1px solid var(--border);
      background: #ffffff;
      outline: none;
      font-size: 14px;
      transition: border-color 0.2s ease, box-shadow 0.2s ease;
    }
    .search input:focus {
      border-color: var(--primary);
      box-shadow: 0 0 0 4px rgba(0, 119, 204, 0.15);
    }
    .search .icon {
      position: absolute;
      right: 10px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 16px;
      color: var(--muted-text);
      pointer-events: none;
    }

    /* Asosiy qism boshligi */
    .hero {
      padding: 24px 0 10px 0;
    }
    .hero h1 {
      font-size: 28px;
      margin: 0 0 6px 0;
    }
    .hero p {
      margin: 0;
      color: var(--muted-text);
    }

    /* Grid */
    .grid {
      display: grid;
      grid-template-columns: repeat(12, 1fr);
      gap: 20px;
      padding: 20px 0 36px 0;
    }
    /* Responsiv ustunlar */
    @media (max-width: 1024px) {
      .grid {
        grid-template-columns: repeat(8, 1fr);
      }
    }
    @media (max-width: 768px) {
      .header-inner {
        flex-wrap: wrap;
        gap: 12px;
      }
      .grid {
        grid-template-columns: repeat(6, 1fr);
      }
      nav.primary-nav {
        order: 3;
        width: 100%;
      }
      .search-wrap {
        order: 2;
        width: 100%;
        justify-content: stretch;
      }
    }
    @media (max-width: 560px) {
      .grid {
        grid-template-columns: repeat(4, 1fr);
      }
      .brand .title strong {
        font-size: 16px;
      }
    }
    @media (max-width: 400px) {
      .grid {
        grid-template-columns: repeat(2, 1fr);
      }
    }

    /* Kartochka */
    .card {
      grid-column: span 4;
      display: flex;
      flex-direction: column;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      overflow: hidden;
      box-shadow: var(--shadow);
      transition: transform 0.2s ease, box-shadow 0.2s ease;
      cursor: pointer;
    }
    /* Katta ekranlarda birinchi kartani kattaroq qilish (vitirina) */
    .card.featured {
      grid-column: span 8;
    }
    .card:hover {
      transform: translateY(-4px) scale(1.01);
      box-shadow: 0 10px 28px rgba(0,0,0,0.12);
    }
    .card .thumb {
      position: relative;
      aspect-ratio: 16 / 9;
      overflow: hidden;
      background: #eef2ff;
    }
    .card .thumb img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.6s ease;
      will-change: transform;
    }
    .card:hover .thumb img {
      transform: scale(1.06);
    }
    .card .content {
      padding: 14px 16px 16px 16px;
    }
    .card .badge {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 6px 10px;
      border-radius: 999px;
      background: rgba(0, 119, 204, 0.08);
      color: var(--primary-600);
      font-weight: 700;
      font-size: 11px;
      letter-spacing: 0.3px;
      text-transform: uppercase;
    }
    .card h3 {
      margin: 10px 0 8px 0;
      font-size: 18px;
      line-height: 1.3;
    }
    .card p {
      margin: 0;
      color: var(--muted-text);
      font-size: 14px;
    }

    /* Modal */
    .modal-backdrop {
      position: fixed;
      inset: 0;
      background: rgba(3, 7, 18, 0.55);
      display: none; /* JS orqali block qilinadi */
      align-items: center;
      justify-content: center;
      padding: 20px;
      z-index: 100;
    }
    .modal {
      width: 100%;
      max-width: 820px;
      background: #ffffff;
      border-radius: 16px;
      overflow: hidden;
      box-shadow: 0 20px 50px rgba(0,0,0,0.25);
      animation: modalIn 0.22s ease;
    }
    @keyframes modalIn {
      from { transform: translateY(8px); opacity: 0; }
      to   { transform: translateY(0); opacity: 1; }
    }
    .modal-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      padding: 14px 16px;
      border-bottom: 1px solid var(--border);
      background: linear-gradient(180deg, #ffffff 0%, #f8fbff 100%);
    }
    .modal-title {
      font-size: 18px;
      font-weight: 800;
      margin: 0;
    }
    .modal-close {
      background: transparent;
      border: none;
      font-size: 22px;
      line-height: 1;
      cursor: pointer;
      color: var(--muted-text);
      transition: transform 0.15s ease, color 0.15s ease;
    }
    .modal-close:hover {
      transform: rotate(90deg);
      color: var(--primary);
    }
    .modal-body {
      padding: 0;
    }
    .modal-body .hero-img {
      aspect-ratio: 16 / 9;
      width: 100%;
      object-fit: cover;
      display: block;
      background: #eef2ff;
    }
    .modal-content {
      padding: 16px;
    }
    .modal-meta {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 10px;
      color: var(--muted-text);
      font-size: 13px;
    }
    .modal-text {
      color: #1f2937;
      line-height: 1.7;
      font-size: 15px;
      white-space: pre-line; /* \n larni saqlash uchun */
    }

    /* Footer */
    footer.site-footer {
      border-top: 1px solid var(--border);
      background: #ffffff;
      padding: 20px 0;
      color: var(--muted-text);
      text-align: center;
      font-size: 14px;
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header class="site-header">
    <div class="container header-inner">
      <div class="brand">
        <div class="logo" aria-label="Logo">üì∞</div>
        <div class="title">
          <strong>Mahalliy Yangiliklar</strong>
          <span>O‚Äòzbekistondan so‚Äònggi xabarlar</span>
        </div>
      </div>

      <!-- Navigatsiya menyusi -->
      <nav class="primary-nav" aria-label="Asosiy navigatsiya">
        <a href="#" class="nav-link active" data-category="Barchasi">Bosh sahifa</a>
        <a href="#" class="nav-link" data-category="Mahalliy">Mahalliy</a>
        <a href="#" class="nav-link" data-category="Jahon">Jahon</a>
        <a href="#" class="nav-link" data-category="Texnologiya">Texnologiya</a>
        <a href="#" class="nav-link" data-category="Sport">Sport</a>
      </nav>

      <!-- Qidiruv -->
      <div class="search-wrap">
        <label class="search" aria-label="Sarlavha bo‚Äòyicha qidiruv">
          <input id="searchInput" type="search" placeholder="Qidirish: sarlavha kiriting..." />
          <span class="icon">üîé</span>
        </label>
      </div>
    </div>
  </header>

  <!-- Asosiy qism -->
  <main class="container">
    <section class="hero">
      <h1>üóûÔ∏è So‚Äònggi yangiliklar</h1>
      <p>Mahalliy, jahon, texnologiya va sport olamidan dolzarb xabarlar</p>
    </section>

    <!-- Kartalar gridi -->
    <section id="newsGrid" class="grid" aria-live="polite" aria-busy="false">
      <!-- JS orqali kartochkalar shu yerga qo‚Äòshiladi -->
    </section>
  </main>

  <!-- Modal -->
  <div id="modalBackdrop" class="modal-backdrop" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modal" role="document">
      <div class="modal-header">
        <h2 class="modal-title" id="modalTitle">Sarlavha</h2>
        <button class="modal-close" id="modalCloseBtn" aria-label="Yopish">‚úï</button>
      </div>
      <div class="modal-body">
        <img id="modalImage" class="hero-img" alt="Yangilik rasmi" />
        <div class="modal-content">
          <div class="modal-meta" id="modalMeta"></div>
          <div class="modal-text" id="modalText"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="site-footer">
    ¬© 2025 Mahalliy Yangiliklar. Barcha huquqlar himoyalangan.
  </footer>

  <script>
    // newsData massivi: sayt yangiliklari shu yerdan o‚Äòqiladi
    // - id: noyob identifikator
    // - title: sarlavha
    // - summary: qisqacha matn
    // - content: to‚Äòliq matn (modal oynada ko‚Äòrsatiladi)
    // - category: kategoriya (Mahalliy, Jahon, Texnologiya, Sport)
    // - image: rasm URL (Unsplash yoki to‚Äòg‚Äòridan-to‚Äòg‚Äòri URL)
    const newsData = [
      {
        id: 1,
        title: "Toshkentda yangi IT hub ochildi",
        summary: "Poytaxtda startaplar uchun qulay infratuzilma, akseleratsiya va mentorlik dasturlari ishga tushirildi.",
        content:
          "Toshkent shahrida IT ekotizimini rivojlantirish maqsadida zamonaviy IT hub ishga tushirildi.\n" +
          "Markaz startaplar uchun kovorking zonalari, laboratoriyalar, akseleratsiya va mentorlik dasturlarini taklif etadi.\n" +
          "Shuningdek, xalqaro hamkorlik aloqalarini kengaytirish rejalashtirilgan.",
        category: "Mahalliy",
        image: "https://images.unsplash.com/photo-1520607162513-77705c0f0d4a?q=80&w=1600&auto=format&fit=crop"
      },
      {
        id: 2,
        title: "Yevropada iqtisodiy ko‚Äòrsatkichlar yaxshilandi",
        summary: "So‚Äònggi chorakda YAIM o‚Äòsishi kutilganidan yuqori bo‚Äòldi, inflyatsiya pasaydi.",
        content:
          "Yevropa mamlakatlarida iqtisodiy faollik oshgani kuzatildi.\n" +
          "Eksport ko‚Äòrsatkichlari va ichki talab o‚Äòsishi YAIMga ijobiy ta‚Äôsir ko‚Äòrsatdi.\n" +
          "Markaziy banklar foiz stavkalarini bosqichma-bosqich pasaytirishi mumkin.",
        category: "Jahon",
        image: "https://images.unsplash.com/photo-1553729459-efe14ef6055d?q=80&w=1600&auto=format&fit=crop"
      },
      {
        id: 3,
        title: "Sun‚Äôiy intellekt bilan ishlovchi tarjimon yangilandi",
        summary: "Yangi versiyada aniqlik oshdi, shuningdek, oflayn rejimda ishlash imkoniyati qo‚Äòshildi.",
        content:
          "Mashina tarjimasi sohasida katta yangilanish taqdim etildi.\n" +
          "Model ko‚Äòproq ma‚Äôlumotlar ustida o‚Äòqitildi, ko‚Äòplab tillarda sifat yaxshilandi.\n" +
          "Endi foydalanuvchilar internet bo‚Äòlmaganda ham tarjimadan foydalanishlari mumkin.",
        category: "Texnologiya",
        image: "https://images.unsplash.com/photo-1518770660439-4636190af475?q=80&w=1600&auto=format&fit=crop"
      },
      {
        id: 4,
        title: "Milliy terma jamoa muhim g‚Äòalabani qo‚Äòlga kiritdi",
        summary: "O‚Äòyin so‚Äònggida urilgan gol hisobiga jamoa raqibni minimal hisobda mag‚Äòlub etdi.",
        content:
          "Qizg‚Äòin kechgan uchrashuvda milliy terma jamoa raqib darvozasini so‚Äònggi daqiqalarda ishg‚Äòol qildi.\n" +
          "Murabbiylar shtabi taktik reja ish berganini ta‚Äôkidladi.\n" +
          "Keyingi uchrashuvga tayyorgarlik boshlangan.",
        category: "Sport",
        image: "https://images.unsplash.com/photo-1600721451882-9a6fefc0f32b?q=80&w=1600&auto=format&fit=crop"
      },
      {
        id: 5,
        title: "Farg‚Äòonada yangi bog‚Äò barpo etildi",
        summary: "Aholi dam olishi uchun yashil hududlar kengaytirildi, veloyo‚Äòlaklar qurildi.",
        content:
          "Hudud ekologiyasini yaxshilash maqsadida 10 gektarlik yangi bog‚Äò foydalanishga topshirildi.\n" +
          "Bog‚Äòda bolalar maydonchalari, sport zonalari va veloyo‚Äòlaklar mavjud.\n" +
          "Yaqin orada qo‚Äòshimcha ekotadbirlari rejalashtirilgan.",
        category: "Mahalliy",
        image: "https://images.unsplash.com/photo-1508606572321-901ea443707f?q=80&w=1600&auto=format&fit=crop"
      },
      {
        id: 6,
        title: "Startaplar uchun grant dasturi e‚Äôlon qilindi",
        summary: "Innovatsion loyihalarni qo‚Äòllab-quvvatlash uchun yangi grantlar ajratiladi.",
        content:
          "Texnoparklar hamkorligida startaplar uchun grant dasturi yo‚Äòlga qo‚Äòyildi.\n" +
          "Loyihalar tanlovi ochiq bo‚Äòlib, yoshlar uchun alohida kvotalar ajratilgan.\n" +
          "Saralash jarayonida mentorlik yordami ko‚Äòrsatiladi.",
        category: "Texnologiya",
        image: "https://images.unsplash.com/photo-1460925895917-afdab827c52f?q=80&w=1600&auto=format&fit=crop"
      }
    ];

    // DOM elementlar
    const newsGrid = document.getElementById("newsGrid");
    const searchInput = document.getElementById("searchInput");
    const navLinks = document.querySelectorAll(".nav-link");

    // Modal elementlar
    const modalBackdrop = document.getElementById("modalBackdrop");
    const modalTitle = document.getElementById("modalTitle");
    const modalImage = document.getElementById("modalImage");
    const modalMeta = document.getElementById("modalMeta");
    const modalText = document.getElementById("modalText");
    const modalCloseBtn = document.getElementById("modalCloseBtn");

    // Holat
    let currentCategory = "Barchasi";
    let searchQuery = "";

    /**
     * Kategoriya nomini rangli chip ko'rinishida qaytarish
     */
    function renderCategoryBadge(category) {
      return \`<span class="badge">\${category}</span>\`;
    }

    /**
     * Kartochka HTMLini yaratish
     */
    function createNewsCard(item, isFeatured) {
      const card = document.createElement("article");
      card.className = "card" + (isFeatured ? " featured" : "");
      card.setAttribute("tabindex", "0");
      card.setAttribute("role", "button");
      card.setAttribute("aria-label", \`\${item.title} - to‚Äòliq matnni ochish\`);

      card.innerHTML = \`
        <div class="thumb">
          <img src="\${item.image}" alt="Rasm: \${item.title}" loading="lazy" />
        </div>
        <div class="content">
          \${renderCategoryBadge(item.category)}
          <h3>\${item.title}</h3>
          <p>\${item.summary}</p>
        </div>
      \`;

      // Bosilganda modalni ochish
      card.addEventListener("click", () => openModal(item));
      // Klaviatura bilan enter bo'lganda ham ochish
      card.addEventListener("keydown", (e) => {
        if (e.key === "Enter" || e.key === " ") {
          e.preventDefault();
          openModal(item);
        }
      });

      return card;
    }

    /**
     * Gridni yangilash: filtrlangan ma'lumotni chizish
     */
    function renderGrid() {
      newsGrid.setAttribute("aria-busy", "true");
      newsGrid.innerHTML = "";

      // Filtrlash: kategoriya + qidiruv (sarlavha bo‚Äòyicha)
      const filtered = newsData.filter((n) => {
        const byCategory = currentCategory === "Barchasi" || n.category === currentCategory;
        const byTitle = n.title.toLowerCase().includes(searchQuery.toLowerCase());
        return byCategory && byTitle;
      });

      // 0-ta bo‚Äòlsa, xabar
      if (filtered.length === 0) {
        const empty = document.createElement("div");
        empty.style.gridColumn = "1 / -1";
        empty.style.textAlign = "center";
        empty.style.color = "var(--muted-text)";
        empty.style.padding = "24px";
        empty.style.border = "1px dashed var(--border)";
        empty.style.borderRadius = "14px";
        empty.textContent = "Hech narsa topilmadi. Boshqa so‚Äòz bilan urinib ko‚Äòring.";
        newsGrid.appendChild(empty);
        newsGrid.setAttribute("aria-busy", "false");
        return;
      }

      // Birinchi kartani "featured" ko‚Äòrinishda qilish (kattaroq)
      filtered.forEach((item, idx) => {
        const card = createNewsCard(item, idx === 0);
        newsGrid.appendChild(card);
      });

      newsGrid.setAttribute("aria-busy", "false");
    }

    /**
     * Modal oynasini ochish
     */
    function openModal(item) {
      modalTitle.textContent = item.title;
      modalImage.src = item.image;
      modalImage.alt = "Rasm: " + item.title;
      modalMeta.innerHTML = \`\${renderCategoryBadge(item.category)} <span>‚Ä¢ ID: \${item.id}</span>\`;
      modalText.textContent = item.content;

      modalBackdrop.style.display = "flex";
      modalBackdrop.setAttribute("aria-hidden", "false");

      // Body scrollni bloklash
      document.body.style.overflow = "hidden";
      // Close tugmasiga fokus
      modalCloseBtn.focus();
    }

    /**
     * Modalni yopish
     */
    function closeModal() {
      modalBackdrop.style.display = "none";
      modalBackdrop.setAttribute("aria-hidden", "true");
      document.body.style.overflow = "";
    }

    // Tashqi maydonni bosganda yopish
    modalBackdrop.addEventListener("click", (e) => {
      if (e.target === modalBackdrop) {
        closeModal();
      }
    });
    // Yopish tugmasi
    modalCloseBtn.addEventListener("click", closeModal);
    // ESC bilan yopish
    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape" && modalBackdrop.getAttribute("aria-hidden") === "false") {
        closeModal();
      }
    });

    /**
     * Navigatsiya: kategoriya bo‚Äòyicha filtrlash
     */
    navLinks.forEach((link) => {
      link.addEventListener("click", (e) => {
        e.preventDefault();
        navLinks.forEach((lnk) => lnk.classList.remove("active"));
        link.classList.add("active");
        currentCategory = link.getAttribute("data-category") || "Barchasi";
        renderGrid();
      });
    });

    /**
     * Qidiruv: sarlavha bo‚Äòyicha filtrlash (debounce bilan)
     */
    let debounceTimer;
    searchInput.addEventListener("input", () => {
      clearTimeout(debounceTimer);
      debounceTimer = setTimeout(() => {
        searchQuery = searchInput.value.trim();
        renderGrid();
      }, 200);
    });

    // Boshlang‚Äòich chizma
    renderGrid();
  </script>
</body>
</html>

